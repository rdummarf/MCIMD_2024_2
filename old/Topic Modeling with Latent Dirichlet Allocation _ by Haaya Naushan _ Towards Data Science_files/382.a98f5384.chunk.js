"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[382],{26565:(e,n,i)=>{i.d(n,{j:()=>r});var t=i(96540),d=i(19228),a=i(20239),o=i(11334),l=i(40064),r=function(e){var n=e.children,i=(0,a.D)(),r=(0,d.qt)().baseTheme,s=(0,l._I)(i,r);return t.createElement(o.N,{theme:s},n)}},20663:(e,n,i)=>{i.d(n,{Z:()=>d,r:()=>a});var t=i(96540),d=t.createContext({isWorkingPreview:!1}),a=function(){return t.useContext(d)}},21335:(e,n,i)=>{i.d(n,{sf:()=>u,YG:()=>r,cd:()=>s});var t=i(55364),d=i.n(t),a=i(39181),o=i(45458),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User_viewerEdge"}}]}}]}}]}}]}}].concat((0,o.A)([{kind:"FragmentDefinition",name:{kind:"Name",value:"User_viewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"createdAt"}},{kind:"Field",name:{kind:"Name",value:"hasCompletedProfile"}},{kind:"Field",name:{kind:"Name",value:"isAllowEdsEnabled"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}},{kind:"Field",name:{kind:"Name",value:"isFacebookFollowing"}},{kind:"Field",name:{kind:"Name",value:"isMediumFollowing"}},{kind:"Field",name:{kind:"Name",value:"isSuperFollowing"}},{kind:"Field",name:{kind:"Name",value:"isTwitterFollowing"}},{kind:"Field",name:{kind:"Name",value:"isUser"}},{kind:"Field",name:{kind:"Name",value:"lastPostCreatedAt"}},{kind:"Field",name:{kind:"Name",value:"readPostsCount"}}]}}]))};function r(e,n,i){var t=e.readQuery({query:l,variables:{userId:n}}),a=d()({},t,{user:{viewerEdge:i}});e.writeQuery({query:l,variables:{userId:n||""},data:a})}var s=function(e){var n,i,t=(0,a.I)(l,{variables:{userId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""},ssr:!1,skip:!(null!=e&&e.id)}),d=t.loading,o=t.error,r=t.data;return d?{loading:d}:o?{error:o}:{viewerEdge:null==r||null===(i=r.user)||void 0===i?void 0:i.viewerEdge}},u=function(e,n){var i=n.userId,t=n.viewerId;return e.identify({__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(t)})}},52897:(e,n,i)=>{i.d(n,{c:()=>r,l:()=>l});var t=i(45458),d=i(62742),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedOut_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_user"}}]}}].concat((0,t.A)(d.LI.definitions))},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedOut_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}}].concat((0,t.A)(d.CV.definitions))},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedIn_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedOut_user"}}]}}].concat((0,t.A)([{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedIn_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]),(0,t.A)(a.definitions))},r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedOut_post"}}]}}].concat((0,t.A)(o.definitions))}},54654:(e,n,i)=>{i.d(n,{P:()=>C});var t=i(96540),d=i(26565),a=i(20663),o=i(27721),l=i(80296),r=i(95420),s=i(44205),u=i(2550),m=i(21335),k=i(86527),c=i(99731),v=i(34317),S=i(49287),w=i(15473),g=function(e){var n,i=e.user,d=e.buttonSize,a=void 0===d?"REGULAR":d,o=e.buttonStyleFn,g=void 0===o?function(e){return e?"OBVIOUS":"STRONG"}:o,f=e.isLinkStyle,N=void 0!==f&&f,F=e.width,p=e.onClick,y=e.preventParentClick,U=(0,u.A)().viewerId,b=(0,m.cd)(i),C=b.viewerEdge,E=b.loading,I=i.id,_=null!==(n=i.name)&&void 0!==n?n:"",A=(0,r.n)(s.g,{variables:{targetUserId:I},optimisticResponse:{followUser:{__typename:"User",id:I,name:_,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(I,"-viewerId:").concat(U),isFollowing:!0}}},update:function(e){e.modify({id:"User:".concat(U),fields:{missionControl:(0,w.A4)("followedAuthors",!0),followingUserConnection:(0,w.nu)(I),socialStats:(0,w.PV)("followingCount",1)}}),e.modify({id:"User:".concat(I),fields:{socialStats:(0,w.PV)("followerCount",1)}})}}),D=(0,l.A)(A,1)[0],h=(0,r.n)(s.b,{variables:{targetUserId:I},optimisticResponse:{unfollowUser:{__typename:"User",id:I,name:_,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(I,"-viewerId:").concat(U),isFollowing:!1}}},update:function(e){e.modify({id:"User:".concat(U),fields:{missionControl:(0,w.A4)("followedAuthors",!1),socialStats:(0,w.PV)("followingCount",-1)}}),e.modify({id:"User:".concat(I),fields:{socialStats:(0,w.PV)("followerCount",-1)}})}}),O=(0,l.A)(h,1)[0],V=(0,v.$)(),B=(0,S.W9)(),P=!(null==C||!C.isFollowing),T=g(!!P),R=t.useCallback((function(e){return y&&e.preventDefault(),p&&p(),V.event("user.followed",{targetUserId:I,followSource:B}),D()}),[I,B,D,y]),L=t.useCallback((function(e){return y&&e.preventDefault(),V.event("user.unfollowed",{targetUserId:I,followSource:B}),O()}),[I,B,O,y]);return N?t.createElement(k.N,{onClick:P?L:R,linkStyle:P?"SUBTLE":"OBVIOUS",disabled:E},P?"Following":"Follow"):t.createElement(c.$n,{onClick:P?L:R,buttonStyle:T,size:a,loading:E,width:F},P?"Following":"Follow")},f=i(54239),N=i(26679),F=i(43634),p=i(51260),y=i(39160),U=i(46879),b=function(e){var n,i=e.buttonSize,d=void 0===i?"REGULAR":i,a=e.user,o=e.post,l=e.isLinkStyle,r=void 0!==l&&l,s=e.susiEntry,u=e.width,m=e.buttonStyle,k=void 0===m?"STRONG":m,c=(0,y.d4)((function(e){return e.config.authDomain})),v=(0,f.zy)(),w=(0,p.W5)(v.pathname),g=null==w||null===(n=w.route)||void 0===n?void 0:n.name;return t.createElement(S.Ne,{source:{userId:a.id},extendSource:!0},t.createElement(F.r,{buttonSize:d,buttonStyle:k,buttonWidth:u,linkStyle:"OBVIOUS",isButton:!r,operation:"register",post:o,user:a,actionUrl:o?(0,U.OHd)(c,a.id,o.id):(0,U._6D)(c,a.id),susiEntry:s,pageSource:(0,N.x)(g,"register")},"Follow"))},C=function(e){var n=e.user,i=e.post,l=e.buttonSize,r=void 0===l?"REGULAR":l,s=e.buttonStyleFn,u=void 0===s?function(e){return e?"OBVIOUS":"STRONG"}:s,m=e.isLinkStyle,k=void 0!==m&&m,c=e.susiEntry,v=e.width,S=e.onClick,w=e.preventParentClick,f=(0,o.R)().value,N=(0,a.r)().isWorkingPreview;return f&&f.id===n.id&&!N?null:t.createElement(d.j,null,f?t.createElement(g,{user:n,buttonSize:r,buttonStyleFn:u,isLinkStyle:k,width:v,onClick:S,preventParentClick:w}):t.createElement(b,{post:i,user:n,buttonSize:r,isLinkStyle:k,susiEntry:c,width:v,buttonStyle:u(!1)}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/382.a98f5384.chunk.js.map