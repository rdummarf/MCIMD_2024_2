"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[3735],{53301:(e,n,t)=>{t.d(n,{H$:()=>o,fh:()=>l,oY:()=>r,vw:()=>s,yS:()=>a});var i=t(45458),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat((0,i.A)(r.definitions))},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubscribeNewsletterV3Mutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shouldRecordConsent"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeNewsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterV3Id"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}}},{kind:"Argument",name:{kind:"Name",value:"shouldRecordConsent"},value:{kind:"Variable",name:{kind:"Name",value:"shouldRecordConsent"}}}]}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnsubscribeNewsletterV3Mutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unsubscribeNewsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterV3Id"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterV3Id"}}}]}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FetchOrLazilyCreateNewsletterV3AndMaybeSubscribeMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}}].concat((0,i.A)(r.definitions))}},16647:(e,n,t)=>{t.d(n,{h:()=>S});var i=t(64467),r=t(80296),l=t(55364),a=t.n(l),o=t(95420),s=t(96540),u=t(75636),d=t(11321),c=t(21335),m=t(34317),v=t(49287),b=t(91830),p=t(53301),k=t(99766);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var S=function(e){var n=e.newsletterV3,t=e.creator,i=e.newsletterName,l=e.hideLinkInConfirmationToast,w=void 0!==l&&l,S=n||{},g=S.id,h=S.type,N=S.slug,y=S.collection,E=(null==n?void 0:n.user)||t,V=null!=i?i:null==n?void 0:n.name,O=s.useState(!1),D=(0,r.A)(O,2),F=D[0],T=D[1],A=(0,d.h)({newsletterSlug:N,collectionSlug:null==y?void 0:y.slug,username:null==E?void 0:E.username}),x=A.viewerEdge,C=A.loading,I=(0,u.z)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),M=s.useState(!1),P=(0,r.A)(M,2),R=P[0],U=P[1];s.useEffect((function(){U(!(null==x||!x.isSubscribed))}),[null==x?void 0:x.isSubscribed]);var _=(0,m.$)(),j=(0,v.W9)(),B=(0,b.zF)();F&&_.event("newsletterV3.subscribe.error",{newsletterV3Id:g});var L=function(e,n,t){if(t){var i={id:"User:".concat(null==E?void 0:E.id),fragment:p.fh,fragmentName:"useNewsletterV3Subscription_user"},r=e.readFragment(i);r&&e.writeFragment(f(f({},i),{},{data:f(f({},r),{},{newsletterV3:t})}))}if(x){var l=e.readQuery({query:k.k,variables:{newsletterSlug:N||"",collectionSlug:(null==y?void 0:y.slug)||null,username:(null==E?void 0:E.username)||null}}),o=a()({},l,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:k.k,variables:{newsletterSlug:N||"",collectionSlug:(null==y?void 0:y.slug)||null,username:(null==E?void 0:E.username)||null},data:o})}n&&null!=E&&E.id&&I&&(0,c.YG)(e,E.id,{isFollowing:!0})},z=(0,o.n)(p.yS,{onCompleted:function(e){var n=e.subscribeNewsletterV3;T(!n),n&&(_.event("newsletterV3.subscribeClicked",{newsletterV3Id:g,source:j}),U(!0))},update:function(e){L(e,!0)}}),G=(0,r.A)(z,1)[0],W=(0,o.n)(p.H$,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;T(!n),n&&(U(!1),B({duration:w?5e3:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:V||null,newsletterType:h||null,unsubscribeFn:function(){return U(!1)},hideEmailSettingsLink:w,hideCloseButton:w}}))},update:function(e){L(e,!1)}}),H=(0,r.A)(W,1)[0],$=(0,o.n)(p.vw,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;T(!n),n&&(_.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:j}),U(!0))},update:function(e,n){var t,i=f({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);L(e,!0,i)}}),Y=(0,r.A)($,1)[0];return{isSubscribed:R,hasError:F,setSubscribe:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];T(!1),e&&!n&&null!=t&&t.id?Y({variables:{userId:null==t?void 0:t.id}}):e&&null!=n&&n.id?G({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:i}}):null!=n&&n.id?H({variables:{newsletterV3Id:null==n?void 0:n.id}}):T(!0)},loading:C}}},99766:(e,n,t)=>{t.d(n,{k:()=>r});var i=t(45458),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NewsletterV3ViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"newsletterSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newsletterV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"newsletterSlug"},value:{kind:"Variable",name:{kind:"Name",value:"newsletterSlug"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3ViewerEdge_newsletterV3ViewerEdge"}}]}}]}}]}}]}}].concat((0,i.A)([{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3ViewerEdge_newsletterV3ViewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3ViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isSubscribed"}}]}}]))}},11321:(e,n,t)=>{t.d(n,{h:()=>l});var i=t(39181),r=t(99766),l=function(e){var n,t=e.newsletterSlug,l=void 0===t?"":t,a=e.collectionSlug,o=void 0===a?null:a,s=e.username,u=void 0===s?null:s,d=(0,i.I)(r.k,{variables:{newsletterSlug:l,collectionSlug:o,username:u},ssr:!1,skip:!l&&!u}),c=d.loading,m=d.error,v=d.data;return c?{loading:c}:m?{error:m}:{viewerEdge:null==v||null===(n=v.newsletterV3)||void 0===n?void 0:n.viewerEdge}}},30572:(e,n,t)=>{t.d(n,{a:()=>v});var i=t(64467),r=t(96540),l=t(69733),a=t(99731),o=t(86527),s=t(34317),u=t(49287),d=t(46879);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=(0,l.Ng)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var n=e.authDomain,t=e.buttonSize,i=e.buttonStyle,l=e.children,c=e.eventData,v=void 0===c?{}:c,b=e.inline,p=void 0!==b&&b,k=e.isButton,w=void 0!==k&&k,f=e.linkStyle,S=void 0===f?"SUBTLE":f,g=e.post,h=e.redirectUrl,N=e.width,y=e.id,E=e.onClick,V=h||(0,d.Icz)(n),O=(0,s.$)(),D=(0,u.Fo)(),F=function(){var e,n;O.event("upsell.clicked",m(m({},v),{},{dimension:null==D?void 0:D.dimension,locationId:null==D?void 0:D.dimension,postId:null==g?void 0:g.id,authorId:null==g||null===(e=g.creator)||void 0===e?void 0:e.id,sequenceId:(null==g||null===(n=g.sequence)||void 0===n?void 0:n.sequenceId)||""}))};return w?r.createElement(a.$n,{buttonStyle:i,href:V,onClick:function(){null==E||E(),F()},size:t,width:N,id:y},l):r.createElement(o.N,{onClick:function(){null==E||E(),F()},href:V,linkStyle:S,inline:p,id:y},l)}))},33735:(e,n,t)=>{t.d(n,{m:()=>re});var i,r,l=t(80296),a=t(96540),o=t(54654),s=t(95420),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},d=t(27721),c=t(7580),m=t(64314),v=t(52290),b=t(95107),p=t(36557),k=t(34317),w=t(49287),f=t(39160),S=t(42600),g=t(79959),h=t(46879),N="after_subscribe_membership_upsell",y=function(e){var n=e.user,t=e.isVisible,i=e.hide,r=(0,f.d4)((function(e){return e.config.authDomain})),o=(0,k.$)(),y=(0,d.R)(),E=y.value,V=y.loading;a.useEffect((function(){var e;V||null!=E&&E.postSubscribeMembershipUpsellShownAt||(o.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:N}),D())}),[V]);var O=(0,s.n)(u,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==E?void 0:E.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),D=(0,l.A)(O,1)[0];return a.createElement(w.Ne,{source:{name:N}},a.createElement(m.m,{isVisible:t,hide:i,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,t;o.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:N}),t=(0,g.ST)((0,h.Qok)(r),{subscribeToUserId:n.id,source:N}),window.location.href=t},showCancelButton:!0,isDestructiveAction:!1},a.createElement(v.a,{marginBottom:"24px"},a.createElement(c.r,{miroId:n.imageId||S._3,alt:n.name||"",diameter:80,freezeGifs:!1})),a.createElement(v.a,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},a.createElement(b.mz,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"You’re subscribed to get email updates. Become a member for more.")),a.createElement(v.a,{marginBottom:"32px"},a.createElement(p.kZ,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",n.name," and other writers you read. Get full access to every story on Medium."))))},E=t(50684),V=t(16647),O=t(78493),D=t(20663),F=t(43634),T=t(30572),A=t(99731),x=t(24960),C=t(41299),I=t(46445),M=t(5600),P=t(44402),R=t(20239),U=t(66305),_=t(42976),j=t(91830);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},B.apply(null,arguments)}const L=function(e){return a.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:23,height:23,fill:"none",viewBox:"0 0 23 23"},e),i||(i=a.createElement("path",{d:"M14 7.286 15.6 9 18 6M11.622 7.036H7a1 1 0 0 0-1 1v7.135a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.216"})),r||(r=a.createElement("path",{d:"m6 8.441 5.27 3.865 1.406-1.054.702-.527"})))};var z,G;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W.apply(null,arguments)}const H=function(e){return a.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:38,height:38,fill:"none",viewBox:"0 0 38 38"},e),z||(z=a.createElement("path",{d:"m24 13 2 2 3-3.5M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"})),G||(G=a.createElement("path",{d:"M11.5 14.5 19 20l4-3"})))};var $,Y;function q(){return q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},q.apply(null,arguments)}const Q=function(e){return a.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",width:23,height:23,fill:"none",viewBox:"0 0 23 23"},e),$||($=a.createElement("path",{d:"M14.581 6.887H18.5M16.392 8.995V5.076M11.622 7.036H7a1 1 0 0 0-1 1v7.135a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.216"})),Y||(Y=a.createElement("path",{d:"m6 8.441 5.27 3.865 2.811-2.108"})))};var Z,J,K,X;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ee.apply(null,arguments)}const ne=function(e){return a.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",width:38,height:38,fill:"none",viewBox:"0 0 38 38"},e),Z||(Z=a.createElement("rect",{width:.5,height:6.5,x:26.25,y:9.25,rx:.25})),J||(J=a.createElement("rect",{width:.5,height:6.5,x:29.75,y:12.25,rx:.25,transform:"rotate(90 29.75 12.25)"})),K||(K=a.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5"})),X||(X=a.createElement("path",{d:"M11.5 14.5 19 20l4-3"})))};var te=t(60603),ie=function(e){var n=e.user,t=e.showMembershipUpsellModal,i=void 0!==t&&t,r=e.showPostFollowSubscribeTooltip,o=void 0!==r&&r,s=e.hidePostFollowSubscribeTooltip,u=e.isVisible,c=void 0===u||u,m=e.isCompact,b=void 0!==m&&m,S=e.buttonStyleFn,N=void 0===S?function(e){return e?"OBVIOUS":"STRONG"}:S,B=a.useRef(null),z=(0,P.l)(),G=(0,R.D)(),W=(0,d.R)().value,$=(0,te.e)(!1),Y=(0,l.A)($,3),q=Y[0],Z=Y[1],J=Y[2],K=n.newsletterV3,X=(0,j.zF)(),ee=(0,k.$)(),ie=(0,w.jI)(),re=(0,w.W9)(),le=(0,E.MW)(),ae=(0,V.h)({newsletterV3:K,creator:n,newsletterName:n.name||void 0}),oe=ae.isSubscribed,se=ae.hasError,ue=ae.loading,de=ae.setSubscribe,ce=(0,f.d4)((function(e){return e.config.authDomain})),me=(0,g.ST)((0,h.Qok)(ce),{subscribeToUserId:n.id,source:re}),ve=!(null==W||!W.membership),be=a.useState(!1),pe=(0,l.A)(be,2),ke=pe[0],we=pe[1],fe=a.useState(!1),Se=(0,l.A)(fe,2),ge=Se[0],he=Se[1],Ne=(0,w.PJ)(le||"").susiEntry,ye=void 0===Ne?"":Ne,Ee=["newsletter_v3_promo","writer_subscription_landing"].includes(ye),Ve=["newsletter_v3_promo"].includes(ye),Oe=(0,O.XF)({membershipType:O.yV.Monthly}),De=!1,Fe=function(){var e;!De&&c&&Te()&&(ee.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=n.newsletterV3)||void 0===e?void 0:e.id)||"",source:ie}),De=!0)},Te=function(){var e;if(!B.current)return!1;var n=null===(e=B.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};a.useEffect((function(){return Fe(),window&&U.R5.on("scroll",Fe),function(){U.R5.off("scroll",Fe)}}),[]),a.useEffect((function(){Fe()}),[c]);var Ae=(0,te.e)(!1),xe=(0,l.A)(Ae,3),Ce=xe[0],Ie=xe[1],Me=xe[2],Pe=function(e,n){var t=(0,d.R)(),i=t.value,r=t.loading,l=a.useRef(null),o=!(null==i||!i.membership),s=(0,E.MW)(),u=(0,w.PJ)(s||"").susiEntry,c=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===u?"":u);if(r)return!1;if(null!==l.current)return l.current;var m=c&&!o&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=i&&i.postSubscribeMembershipUpsellShownAt);return l.current=m,m}(n),Re=a.useState(!1),Ue=(0,l.A)(Re,2),_e=Ue[0],je=Ue[1];a.useEffect((function(){i&&oe&&!_e&&Pe?Ie():Me()}),[oe,_e,Pe]),a.useEffect((function(){le&&!Pe&&Ee&&oe&&(!Ve&&re===ye||Ve)&&X({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:_.$J.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return de(!1)}}})}),[le,oe]),a.useEffect((function(){if(oe&&ge&&K){var e=!ve&&!!n.isPartnerProgramEnrolled;e&&ee.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:K.id,source:re}),we(e),he(!1)}}),[oe,ge,K]);var Be=(0,D.r)().isWorkingPreview;if(se||n.viewerEdge.isUser&&!Be)return null;var Le,ze=N(!!oe),Ge=function(e,n){return function(t){return{stroke:n?t.colorTokens.background.neutral.secondary.base:e,height:b?"23px":"36px",width:b?"23px":"36px"}}},We=z(Ge("OBVIOUS"===ze?G.colorTokens.background.accent.primary.base:G.baseColor.fill.dark,ue)),He=z(Ge("STRONG"===ze?G.colorTokens.background.neutral.primary.base:G.backgroundColor,ue));Le=oe?b?a.createElement(L,{className:We}):a.createElement(H,{className:We}):b?a.createElement(Q,{className:He}):a.createElement(ne,{className:He});var $e=a.createElement(A.$n,{loading:ue,buttonStyle:ze,onClick:function(){var e;he(!oe),W?oe?de(!1):W&&W.allowEmailAddressSharingEditorWriter?de(!0,!1):Z():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?ee.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:re}):ee.event("user.LOSubscribeClicked",{targetUserId:n.id,source:re})},padding:"0","aria-label":"Subscribe"},Le),Ye=function(){return a.createElement(v.a,{padding:"14px 12px 20px",maxWidth:"220px"},a.createElement(p.kZ,{tag:"div",scale:"S",color:"DARKER"},a.createElement("strong",null,"You're subscribed to ",n.name,". Become a member for more.")," Get full access to every story on Medium for ",Oe," a month."),a.createElement(v.a,{paddingTop:"8px"},a.createElement(T.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:me,width:"150px",onClick:function(){ee.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:K.id,source:re})}},a.createElement(v.a,{textAlign:"center"},a.createElement(p.kZ,{scale:"S",color:"WHITE"},"Become a member")))))},qe=function(){return a.createElement(v.a,{padding:"10px 12px",maxWidth:"166px"},a.createElement(p.kZ,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},Qe=function(e){var n=e.children;return a.createElement(x.A,{isVisible:!!s&&!oe,hide:s,placement:"bottom",popoverRenderFn:qe,targetDistance:10,role:"tooltip"},n)},Ze=function(e){var n=e.children;return a.createElement(x.A,{isVisible:!ue&&ke,hide:function(){return we(!1)},placement:"bottom",popoverRenderFn:Ye,targetDistance:10,role:"tooltip"},n)},Je=function(e){var n=e.children;return a.createElement(C.R,{isVisible:!ue&&!oe,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:qe,role:"tooltip",targetDistance:10},n)},Ke=function(e){var n=e.children;return o&&!oe?a.createElement(Qe,null,n):ke?a.createElement(Ze,null,n):oe?a.createElement(M.G,{tooltipText:"Subscribed",targetDistance:10},n):a.createElement(Je,null,n)};return a.createElement("div",{ref:B},a.createElement(Ke,null,a.createElement(v.a,null,W&&a.createElement(I.T,{onConfirm:function(){de(!0,!0)},isVisible:q,hide:J,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),W?$e:a.createElement(F.r,{operation:"register",newsletterV3:K,user:n,actionUrl:K?(0,h.gj9)(K.id):(0,h.Yrp)(n.id),susiEntry:"subscribe_user"},$e))),Ce&&a.createElement(y,{user:n,isVisible:Ce,hide:function(){je(!0),Me()}}))},re=function(e){var n=e.creator,t=e.followButtonSize,i=void 0===t?"REGULAR":t,r=e.shouldHideTooltip,s=void 0!==r&&r,u=e.post,d=e.showMembershipUpsellModal,c=e.susiEntry,m=e.isVisible,b=e.width,p=e.isSubscribeCompact,k=void 0!==p&&p,w=e.buttonStyleFn,f=a.useState(!1),S=(0,l.A)(f,2),g=S[0],h=S[1];return a.createElement(a.Fragment,null,a.createElement(o.P,{buttonSize:i,onClick:function(){n.viewerEdge.isFollowing||h(!0)},post:u,user:n,susiEntry:c,width:b,buttonStyleFn:w}),a.createElement(v.a,{marginLeft:k?"4px":"8px"},a.createElement(ie,{user:n,showMembershipUpsellModal:d,showPostFollowSubscribeTooltip:g&&!s,hidePostFollowSubscribeTooltip:function(){return h(!1)},isVisible:m,isCompact:k,buttonStyleFn:w})))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3735.3535ed24.chunk.js.map